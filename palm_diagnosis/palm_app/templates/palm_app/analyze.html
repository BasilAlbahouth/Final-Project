{% extends "palm_app/base.html" %}
{% load static %}
{% block title %}ุชุดุฎูุต ุตุญุฉ ุงููุฎูู{% endblock %}

{% block content %}

    <link rel="stylesheet" href="{% static 'css/analyse.css' %}">
    
    <div class="page-bg" style="background-image: url('{% static 'images/background.png' %}');"></div>

    <div class="container">

        <!-- CSRF -->
        <form id="csrf-token-form" style="display:none;">
            {% csrf_token %}
        </form>

        <!-- ุฒุฑ ุงูุฑุฌูุน -->
        <a href="{% url 'home' %}" class="back-btn">โ ุงูุนูุฏุฉ ููุฑุฆูุณูุฉ</a>

        <!-- ุงูุดุงุฑุฉ ุงูุนูููุฉ -->
        <div class="top-badge">
            <div class="top-badge-inner">
                <div class="tb-icon">๐ด</div>
                <div class="tb-text">
                    <div class="tb-title">ุชุดุฎูุต ุตุญุฉ ุงููุฎูู</div>
                    <div class="tb-sub">ุงูุชุดู ุญุงูุฉ ูุฎููู ุจุฏูุฉ ุนุงููุฉ ุจุงุณุชุฎุฏุงู ุชูููุงุช ุงูุฐูุงุก ุงูุงุตุทูุงุนู</div>
                </div>
            </div>
        </div>

        <!-- ุจุทุงูุฉ ุงุฎุชูุงุฑ ุทุฑููุฉ ุงูุชุญููู -->
        <section class="card method-card">
            <h2 class="card-title">ุงุฎุชุฑ ุทุฑููุฉ ุงูุชุญููู</h2>
            <p class="card-sub">ููููู ุงูุชูุงุท ุตูุฑุฉ ุฌุฏูุฏุฉ ุฃู ุฑูุน ุตูุฑุฉ ูู ุฌูุงุฒู</p>

            <div class="method-options">

                <!-- ูุงููุฑุง -->
                <button class="option green" id="cameraBtn" type="button">
                    <div class="opt-icon">
                        <svg viewBox="0 0 24 24" width="28" height="28">
                            <path d="M4 8h3l2-2h6l2 2h3v11H4V8z" fill="none" stroke="currentColor" stroke-width="1.6"
                                stroke-linejoin="round" />
                            <circle cx="12" cy="13.5" r="3.5" fill="none" stroke="currentColor" stroke-width="1.6" />
                        </svg>
                    </div>
                    <div class="opt-title">ุงูุชูุงุท ุตูุฑุฉ</div>
                    <div class="opt-sub">ุจุงุณุชุฎุฏุงู ูุงููุฑุง ุงูุฌูุงุฒ</div>
                </button>

                <!-- ุฑูุน ุตูุฑุฉ -->
                <button class="option orange" id="uploadBtn" type="button">
                    <div class="opt-icon">
                        <svg viewBox="0 0 24 24" width="28" height="28">
                            <rect x="3" y="5" width="18" height="14" rx="2" fill="none" stroke="currentColor"
                                stroke-width="1.6" />
                            <path d="M8 13l3-3 5 6H6" fill="none" stroke="currentColor" stroke-width="1.6"
                                stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                    </div>
                    <div class="opt-title">ุฑูุน ุตูุฑุฉ</div>
                    <div class="opt-sub">ูู ููู ููุฌูุฏ</div>
                </button>

            </div>

            <!-- ุญููู ูุฎููุฉ -->
            <input type="file" id="cameraInput" accept="image/*" capture="environment" hidden>
            <input type="file" id="fileInput" accept="image/*" hidden>

            <!-- ุฅุฑุดุงุฏุงุช -->
            <div class="hint-box">
                <div class="hint-head">
                    <span class="hint-i">i</span>
                    <span>ููุญุตูู ุนูู ุฃูุถู ูุชุงุฆุฌ:</span>
                </div>
                <ul class="hint-list">
                    <li>ุงูุชูุท ุงูุตูุฑ ูู ุถูุก ุงูููุงุฑ ุงูุทุจูุนู.</li>
                    <li>ุงุฌุนู ุงูุณุนู ุธุงูุฑูุง ุจุดูู ูุงุถุญ.</li>
                    <li>ุชุฌูุจ ุงูุตูุฑ ุงูุถุจุงุจูุฉ ุฃู ุงูุจุนูุฏุฉ ุฌุฏูุง.</li>
                </ul>
            </div>
        </section>

        <!-- ูุชูุฌุฉ ุงูุชุญููู -->
        <section id="result" class="result-wrap" style="display:none;">
            <div class="result-grid">

                <!-- ุตูุฑุฉ ุงููุณุชุฎุฏู -->
                <div class="result-left">
                    <h3 class="res-title">ุงูุตูุฑุฉ ุงููุฑููุนุฉ</h3>
                    <div class="res-image">
                        <img id="resultImg" alt="preview">
                    </div>
                </div>
                

                <!-- ูุชูุฌุฉ ุงูุชุญููู -->
                <div id="resultPanel"></div>

            </div>
        </section>
    </div>
    <script>
    window.isUserAuthenticated = {{ user.is_authenticated|yesno:"true,false" }};
    </script>
    <script src="{% static 'js/analyse.js' %}"></script>
{% endblock %}
