{% extends "palm_app/base.html" %}
{% load static %}

{% block title %}ุณุฌู ุงูุชุดุฎูุตุงุช{% endblock %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/history.css' %}">

<div class="page-bg"></div>

<div class="history-page">

    <!-- ===== Header ===== -->
    <div class="glass-card history-header">
        <div class="header-text">
            <h2>๐ ุณุฌู ุงูุชุดุฎูุตุงุช</h2>
            <p>ุฌููุน ุงูุชุดุฎูุตุงุช ุงูุชู ููุช ุจูุง ูุฑุชุจุฉ ูู ุงูุฃุญุฏุซ ุฅูู ุงูุฃูุฏู</p>
        </div>

        <!-- Search (ุชุญุถูุฑู) -->
        <div class="history-search">
            <input type="text" placeholder="ุงุจุญุซ ุจุงุณู ุงููุฎูุฉ ุฃู ุงููุชูุฌุฉ...">
            <span class="search-icon">๐</span>
        </div>
    </div>

    <!-- ===== History List ===== -->
    <div class="history-list">

        {% if diagnoses %}
            {% for d in diagnoses %}
            <div class="glass-card history-card">

                <!-- Image -->
                <div class="history-image">
                    {% if d.image %}
                        <img src="{{ d.image.url }}" alt="ุตูุฑุฉ ุงูุชุดุฎูุต">
                    {% else %}
                        <div class="image-placeholder">๐ท</div>
                    {% endif %}
                </div>

                <!-- Info -->
                <div class="history-info">

                    <div class="history-top">
                        <h3>{{ d.result_label }}</h3>
                        <span class="history-date">
                            {{ d.created_at|date:"Y-m-d H:i" }}
                        </span>
                    </div>

                    <p class="history-palm">
                        ๐ด {{ d.palm.name }}
                    </p>

                    <!-- Confidence -->
                    <div class="confidence-box">
                        <span>ุฏุฑุฌุฉ ุงูุซูุฉ</span>
                        <div class="confidence-bar">
                            <div style="width: {{ d.confidence_score|floatformat:0 }}%"></div>
                        </div>
                        <strong>{{ d.confidence_score|floatformat:0 }}%</strong>
                    </div>

                    <!-- Actions -->
                    <div class="history-actions">
                        <button class="btn-view">ุนุฑุถ ุงูุชูุงุตูู</button>
                        <button class="btn-delete">ุญุฐู</button>
                    </div>

                </div>
            </div>
            {% endfor %}
        {% else %}
            <div class="glass-card empty-history">
                <p>ูุง ููุฌุฏ ุชุดุฎูุตุงุช ูุญููุธุฉ ุญุชู ุงูุขู ๐ฑ</p>
            </div>
        {% endif %}

    </div>
</div>

{% endblock %}
